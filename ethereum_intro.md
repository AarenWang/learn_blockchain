# 以太坊（Ethereum）

### 目录
TODO

以太坊是一个知名的底层应用公链项目，它能够支持DApp（去中心化应用）在其上面进行创建和运行，就如同手机上的安卓或iOS系统能够支持APP运行一样。
在2016年，以太坊曾因为the DAO事件而进行了硬分叉。

## 创建以太坊的初衷

这就要提到比特币的缺点：
- 交易速度慢：出块速度慢，算法决定约10min出一块，仅满足平均每秒7笔交易
- POW算法耗电：挖矿（打包有效的区块）的本质是计算机不断消耗算力去完成一道需要花费一定时间的数学题，因为挖矿奖励，越来越多计算机资源加入网络
去做数学题，十分消耗电力资源。
- 仅实现货币的去中心化不能保证现实交易成功：货币交易始终为现实交易服务，传统法币交易受到法律保护，我去超市消费给了钱，就一定能拿到商品，拿不到可以
告他，法院会受理；但比特币交易不受保护，比特币套现也需要走现实的法币交易流程，但比特币交易和法币交易是分离的两个步骤，没有人能保证你转出比特币给对方后，
对方就一定会转给你法币，同时你也找不到对方的真实身份。
>我们通常在交易所进行比特币和法币的流转交易，交易所承担了一个中间保证人的角色。比如我要向某人购买1枚比特币，我得先向对方提供的法币账户（如微信）转账对应金额，
> 对方确认收到后，再转账比特币给我。如果对方收到法币后不转比特币，那么交易所将会核实我们之间的交易过程，并从对方在交易所的**押金（保证金）**扣除后转给我。
> 这其实类似电商交易场景。  
> 但是，同样的，只要不受法律保护，交易所仍然有跑路的可能，到时候所有交了押金的人都将承受损失，这并不缺少真实案例。  
> 
> **注意**：比特币是一个去中心化的高匿名性货币系统，即使受到法律保护，通过技术也很难追踪到对方的真实身份，追回损失的可能性也是极低的，更不要说对方和你不在
> 同一国家。

那么以太坊如何解决这几点：  
**xxx解决交易速度慢**  

TODO

**提出POS算法解决POW耗电问题**

以太坊中，POS和POW算法结合，并逐步向POS算法过渡。

**提出智能合约约束双方承诺**

智能合约是以太坊中最主要的创新，

## 如何使用以太坊平台

#### 1.谷歌扩展商店安装metamask插件
#### 2.设置密码
#### 3.获取平台根据密码生成的多个助记词组合
助记词相当于账户+密码，需要私密保存。可用来登录以太坊，以及恢复账户。
#### 4.注册&登录成功
此时已经拥有了一个0以太币（代号ETH）的以太坊账户Account_1，这个账户由一个唯一字符串地址，可以公开，相当于银行卡号，作为转账目标。
#### 5.使用测试网
点击插件展开的页面上方会显示**Main Ethereum Network**，这表示目前显示的主网中Account_1地址的余额，想要增加余额需要根据当前以太币市场价格用法币购买获得。  
为了测试，可以切换主网为其他测试网如Rinkeby Test Network，然后进入网站给Account_1地址转账以太币。
>在笔者测试时，所有展示的测试网中没有Rinkeby Test Network，但有其他测试网，读者可根据google查询其他测试网如何为自己地址充值以太币。  
> **注意**：通常测试网需要你输入的地址并不直接是以太坊地址，而是一个社交网站的包含了你以太坊地址的帖子链接，测试网会从链接中读取地址并转账，这是为了防范恶意行为者耗尽所有可用资金。

##### 6.油费（Gas fee，也叫矿工费）
以太币转账需要填写油费单价（gas price=gwei）和油费数量(gas limit)  
>Gas fee= gas price * gas limit

gas price也叫做**Gwei**表示gas最小单位，1Gwei等于0.000000001ETH(1ETH=10亿Gwei)。
>收油费一方面是为了防止有一些黑客发布大量无意义的交易堵塞网络。由于发送交易收费，黑客就不会通过这种方式攻击网络，因为发送大量交易需要付出大量的费用；
> 另一方面也是作为矿工激励，毕竟区块能存放的交易数量是有限的，矿工可以自由挑选gas价格高的交易去打包，所以gas出价高的交易更快被全网确认。

**gas price（gwei）**  
油费单价，根据网络情况变化，越高则交易完成速度越快。通常有个快-中-慢的推荐值，参考http://ethgasstation.info/
**gas limit**  
gwei数量，愿意为一笔交易付出的最大gas数量，目的是防止网络拥堵时你的交易被一直处理消耗大量eth，浪费钱财，如果以太坊网络长时间堵塞，那么矿工就会一直尝试
处理你的交易，一直消耗一定数量的gas price，直到耗完gas limit*price这么多的手续费，**并且交易因为拥堵也不一定会成功**。
>给一个帐户转账eth消耗的gas limit为固定21000；

上述metamask是官方插件；也可以使用其他交易所提供的钱包，在转账以太币时，这些钱包可能允许你直接设置gas费用，而不用单独设置limit和price。

## 智能合约

#### 1.定义
是跑在以太坊系统中的一段代码，亦称为代码合同，它可以行使类似现实中的合同约束行为。  
但它只能约束：
- 规则明确，一旦确定不轻易修改的业务，如**航班延误赔偿**（程序可以自动在航班系统中查询延误时间，一旦延误预期设定的N小时，则自动赔付以太币给预期设定的
账户）；
- 不能约束规则不明确，或会经常变化规则的业务，如汽车保险，人身医疗保险，因为这些业务无法通过程序去自动判别其中的具体情况以及程度，只能通过人工进行；并且
合约一旦开始运行，就无法撤销。

#### 2.适用场景

- 金融-银行
- 金融-证券
- 金融-众筹
- 金融-竞拍：解决恶意竞拍
- 跨境贸易
- 物流供应链：通过区块链记录和查询各类物品供应原始数据